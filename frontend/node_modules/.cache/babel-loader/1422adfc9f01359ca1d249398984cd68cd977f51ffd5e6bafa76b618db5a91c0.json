{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sayda\\\\CascadeProjects\\\\beta-tech-support\\\\frontend\\\\src\\\\components\\\\tickets\\\\AssignTicketDialog.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, FormControl, InputLabel, Select, MenuItem, Typography, CircularProgress, Alert } from '@mui/material';\nimport { useTickets } from '../../contexts/TicketContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssignTicketDialog = ({\n  open,\n  handleClose,\n  ticketId,\n  onSuccess\n}) => {\n  _s();\n  const [selectedTechnician, setSelectedTechnician] = useState('');\n  const [error, setError] = useState(null);\n  const {\n    assignTicket,\n    fetchTechnicians,\n    technicians,\n    technicianLoading\n  } = useTickets();\n  useEffect(() => {\n    if (open) {\n      console.log('Dialog opened, fetching technicians');\n      fetchTechnicians();\n      setSelectedTechnician('');\n      setError(null);\n    }\n  }, [open, fetchTechnicians]);\n  const handleAssign = async () => {\n    if (!selectedTechnician) {\n      setError('Please select a technician');\n      return;\n    }\n    try {\n      console.log('Assigning ticket', ticketId, 'to technician', selectedTechnician);\n      const result = await assignTicket(ticketId, selectedTechnician);\n      console.log('Assignment result:', result);\n      if (onSuccess) {\n        console.log('Calling onSuccess callback');\n        onSuccess(result);\n      }\n      handleClose();\n    } catch (err) {\n      var _err$response;\n      console.error('Error assigning ticket:', err);\n      console.error('Error details:', (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n      setError(err.message || 'Failed to assign ticket');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: handleClose,\n    fullWidth: true,\n    maxWidth: \"sm\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: \"Assign Ticket\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mb: 2\n        },\n        children: \"Select a technician to assign this ticket to:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), technicianLoading && technicians.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          padding: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"technician-select-label\",\n          children: \"Technician\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"technician-select-label\",\n          value: selectedTechnician,\n          onChange: e => setSelectedTechnician(e.target.value),\n          label: \"Technician\",\n          disabled: technicianLoading,\n          children: technicians.length === 0 ? /*#__PURE__*/_jsxDEV(MenuItem, {\n            disabled: true,\n            value: \"\",\n            children: \"No technicians available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this) : technicians.map(tech => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: tech._id,\n            children: tech.firstName && tech.lastName ? `${tech.firstName} ${tech.lastName}` : tech.username || 'Technician'\n          }, tech._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        disabled: technicianLoading,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleAssign,\n        color: \"primary\",\n        variant: \"contained\",\n        disabled: technicianLoading || !selectedTechnician,\n        children: technicianLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 32\n        }, this) : 'Assign'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(AssignTicketDialog, \"atESD4gNobxwE1SeRKpvJsb75YA=\", false, function () {\n  return [useTickets];\n});\n_c = AssignTicketDialog;\nexport default AssignTicketDialog;\nvar _c;\n$RefreshReg$(_c, \"AssignTicketDialog\");","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogTitle","DialogContent","DialogActions","Button","FormControl","InputLabel","Select","MenuItem","Typography","CircularProgress","Alert","useTickets","jsxDEV","_jsxDEV","AssignTicketDialog","open","handleClose","ticketId","onSuccess","_s","selectedTechnician","setSelectedTechnician","error","setError","assignTicket","fetchTechnicians","technicians","technicianLoading","console","log","handleAssign","result","err","_err$response","response","data","message","onClose","fullWidth","maxWidth","children","fileName","_jsxFileName","lineNumber","columnNumber","severity","sx","mb","variant","length","style","display","justifyContent","padding","size","id","labelId","value","onChange","e","target","label","disabled","map","tech","_id","firstName","lastName","username","onClick","color","_c","$RefreshReg$"],"sources":["C:/Users/sayda/CascadeProjects/beta-tech-support/frontend/src/components/tickets/AssignTicketDialog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Typography,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport { useTickets } from '../../contexts/TicketContext';\n\nconst AssignTicketDialog = ({ open, handleClose, ticketId, onSuccess }) => {\n  const [selectedTechnician, setSelectedTechnician] = useState('');\n  const [error, setError] = useState(null);\n  const { assignTicket, fetchTechnicians, technicians, technicianLoading } = useTickets();\n\n  useEffect(() => {\n    if (open) {\n      console.log('Dialog opened, fetching technicians');\n      fetchTechnicians();\n      setSelectedTechnician('');\n      setError(null);\n    }\n  }, [open, fetchTechnicians]);\n\n  const handleAssign = async () => {\n    if (!selectedTechnician) {\n      setError('Please select a technician');\n      return;\n    }\n\n    try {\n      console.log('Assigning ticket', ticketId, 'to technician', selectedTechnician);\n      \n      const result = await assignTicket(ticketId, selectedTechnician);\n      console.log('Assignment result:', result);\n      \n      if (onSuccess) {\n        console.log('Calling onSuccess callback');\n        onSuccess(result);\n      }\n      handleClose();\n    } catch (err) {\n      console.error('Error assigning ticket:', err);\n      console.error('Error details:', err.response?.data);\n      setError(err.message || 'Failed to assign ticket');\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"sm\">\n      <DialogTitle>Assign Ticket</DialogTitle>\n      <DialogContent>\n        {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n        \n        <Typography variant=\"body2\" sx={{ mb: 2 }}>\n          Select a technician to assign this ticket to:\n        </Typography>\n        \n        {technicianLoading && technicians.length === 0 ? (\n          <div style={{ display: 'flex', justifyContent: 'center', padding: '20px' }}>\n            <CircularProgress size={30} />\n          </div>\n        ) : (\n          <FormControl fullWidth>\n            <InputLabel id=\"technician-select-label\">Technician</InputLabel>\n            <Select\n              labelId=\"technician-select-label\"\n              value={selectedTechnician}\n              onChange={(e) => setSelectedTechnician(e.target.value)}\n              label=\"Technician\"\n              disabled={technicianLoading}\n            >\n              {technicians.length === 0 ? (\n                <MenuItem disabled value=\"\">\n                  No technicians available\n                </MenuItem>\n              ) : (\n                technicians.map((tech) => (\n                  <MenuItem key={tech._id} value={tech._id}>\n                    {tech.firstName && tech.lastName \n                      ? `${tech.firstName} ${tech.lastName}` \n                      : tech.username || 'Technician'}\n                  </MenuItem>\n                ))\n              )}\n            </Select>\n          </FormControl>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} disabled={technicianLoading}>Cancel</Button>\n        <Button \n          onClick={handleAssign} \n          color=\"primary\" \n          variant=\"contained\" \n          disabled={technicianLoading || !selectedTechnician}\n        >\n          {technicianLoading ? <CircularProgress size={24} /> : 'Assign'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default AssignTicketDialog;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}