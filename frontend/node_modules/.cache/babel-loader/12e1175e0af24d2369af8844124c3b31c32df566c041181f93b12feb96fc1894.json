{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sayda\\\\CascadeProjects\\\\beta-tech-support\\\\frontend\\\\src\\\\components\\\\notifications\\\\TicketNotification.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Snackbar, Alert, Button } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { onSocketEvent, offSocketEvent, joinTechnicianRoom } from '../../services/socketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TicketNotification = () => {\n  _s();\n  const [notification, setNotification] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // If user is a technician, join the technician room\n    const userType = localStorage.getItem('userType');\n    if (userType === 'technician') {\n      joinTechnicianRoom();\n    }\n\n    // Setup event handlers for notifications\n    const handleNewTicket = data => {\n      setNotification({\n        type: 'new',\n        message: `New ${data.priority} priority ${data.type} ticket: ${data.description}`,\n        ticketId: data.ticketId\n      });\n    };\n    const handleTicketAssigned = data => {\n      setNotification({\n        type: 'assigned',\n        message: `Ticket #${data.ticketId} assigned to ${data.assignedTo}`,\n        ticketId: data.ticketId\n      });\n    };\n\n    // Register event listeners\n    onSocketEvent('newTicket', handleNewTicket);\n    onSocketEvent('ticketAssigned', handleTicketAssigned);\n\n    // Cleanup function\n    return () => {\n      // Remove event listeners\n      offSocketEvent('newTicket', handleNewTicket);\n      offSocketEvent('ticketAssigned', handleTicketAssigned);\n    };\n  }, []);\n  const handleClose = () => {\n    setNotification(null);\n  };\n  const handleViewTicket = () => {\n    navigate(`/tickets/${notification.ticketId}`);\n    handleClose();\n  };\n  if (!notification) return null;\n  return /*#__PURE__*/_jsxDEV(Snackbar, {\n    open: Boolean(notification),\n    autoHideDuration: 6000,\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      severity: notification.type === 'new' ? 'info' : 'success',\n      onClose: handleClose,\n      action: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"inherit\",\n        size: \"small\",\n        onClick: handleViewTicket,\n        children: \"View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this),\n      children: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(TicketNotification, \"Fa2oRSMdccct9cblf3XeKkvPVCY=\", false, function () {\n  return [useNavigate];\n});\n_c = TicketNotification;\nexport default TicketNotification;\nvar _c;\n$RefreshReg$(_c, \"TicketNotification\");","map":{"version":3,"names":["React","useEffect","useState","Snackbar","Alert","Button","useNavigate","onSocketEvent","offSocketEvent","joinTechnicianRoom","jsxDEV","_jsxDEV","TicketNotification","_s","notification","setNotification","navigate","userType","localStorage","getItem","handleNewTicket","data","type","message","priority","description","ticketId","handleTicketAssigned","assignedTo","handleClose","handleViewTicket","open","Boolean","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","children","severity","action","color","size","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/sayda/CascadeProjects/beta-tech-support/frontend/src/components/notifications/TicketNotification.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Snackbar, Alert, Button } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { onSocketEvent, offSocketEvent, joinTechnicianRoom } from '../../services/socketService';\n\nconst TicketNotification = () => {\n  const [notification, setNotification] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // If user is a technician, join the technician room\n    const userType = localStorage.getItem('userType');\n    if (userType === 'technician') {\n      joinTechnicianRoom();\n    }\n\n    // Setup event handlers for notifications\n    const handleNewTicket = (data) => {\n      setNotification({\n        type: 'new',\n        message: `New ${data.priority} priority ${data.type} ticket: ${data.description}`,\n        ticketId: data.ticketId\n      });\n    };\n\n    const handleTicketAssigned = (data) => {\n      setNotification({\n        type: 'assigned',\n        message: `Ticket #${data.ticketId} assigned to ${data.assignedTo}`,\n        ticketId: data.ticketId\n      });\n    };\n\n    // Register event listeners\n    onSocketEvent('newTicket', handleNewTicket);\n    onSocketEvent('ticketAssigned', handleTicketAssigned);\n\n    // Cleanup function\n    return () => {\n      // Remove event listeners\n      offSocketEvent('newTicket', handleNewTicket);\n      offSocketEvent('ticketAssigned', handleTicketAssigned);\n    };\n  }, []);\n\n  const handleClose = () => {\n    setNotification(null);\n  };\n\n  const handleViewTicket = () => {\n    navigate(`/tickets/${notification.ticketId}`);\n    handleClose();\n  };\n\n  if (!notification) return null;\n\n  return (\n    <Snackbar\n      open={Boolean(notification)}\n      autoHideDuration={6000}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n    >\n      <Alert\n        severity={notification.type === 'new' ? 'info' : 'success'}\n        onClose={handleClose}\n        action={\n          <Button color=\"inherit\" size=\"small\" onClick={handleViewTicket}>\n            View\n          </Button>\n        }\n      >\n        {notification.message}\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default TicketNotification;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}