{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sayda\\\\CascadeProjects\\\\beta-tech-support\\\\frontend\\\\src\\\\pages\\\\tickets\\\\TicketDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Container, Paper, Typography, Box, Grid, Chip, Divider, TextField, Button, CircularProgress, Card, CardContent, Avatar, IconButton, Menu, MenuItem, Dialog, DialogTitle, DialogContent, DialogActions, Alert } from '@mui/material';\nimport { Send as SendIcon, MoreVert as MoreVertIcon, AttachFile as AttachFileIcon } from '@mui/icons-material';\nimport axios from 'axios';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { getSocket, joinTicketRoom, onSocketEvent, offSocketEvent, sendTicketMessage } from '../../services/socketService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getStatusColor = status => {\n  switch (status) {\n    case 'new':\n      return 'info';\n    case 'in_progress':\n      return 'warning';\n    case 'on_hold':\n      return 'error';\n    case 'resolved':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\nconst getPriorityColor = priority => {\n  switch (priority) {\n    case 'urgent':\n      return 'error';\n    case 'high':\n      return 'warning';\n    case 'medium':\n      return 'info';\n    case 'low':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\nconst TicketDetails = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [ticket, setTicket] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const messagesEndRef = useRef(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [statusDialog, setStatusDialog] = useState(false);\n  const [newStatus, setNewStatus] = useState('');\n  useEffect(() => {\n    joinTicketRoom(id);\n    const handleMessageReceived = data => {\n      setMessages(prev => [...prev, data]);\n      scrollToBottom();\n    };\n    onSocketEvent('message_received', handleMessageReceived);\n    fetchTicketDetails();\n    return () => {\n      offSocketEvent('message_received', handleMessageReceived);\n    };\n  }, [id, user]);\n  const fetchTicketDetails = async () => {\n    try {\n      const [ticketRes, messagesRes] = await Promise.all([axios.get(`${process.env.REACT_APP_API_URL}/api/tickets/${id}`), axios.get(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/messages`)]);\n      setTicket(ticketRes.data);\n      setMessages(messagesRes.data);\n      scrollToBottom();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error fetching ticket details:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load ticket details');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = async () => {\n    if (!message.trim()) return;\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/messages`, {\n        content: message,\n        sender: user._id\n      });\n      sendTicketMessage({\n        ticketId: id,\n        message: response.data\n      });\n      setMessage('');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Error sending message:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to send message');\n    }\n  };\n  const handleStatusChange = async () => {\n    try {\n      await axios.patch(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/status`, {\n        status: newStatus\n      });\n      setTicket(prev => ({\n        ...prev,\n        status: newStatus\n      }));\n      setStatusDialog(false);\n      setAnchorEl(null);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Error updating ticket status:', err);\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to update ticket status');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this);\n  }\n  if (!ticket) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: \"Ticket not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: [\"Ticket #\", ticket.ticketNumber]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), (user.role === 'admin' || user.role === 'technical') && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: e => setAnchorEl(e.currentTarget),\n            children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Menu, {\n            anchorEl: anchorEl,\n            open: Boolean(anchorEl),\n            onClose: () => setAnchorEl(null),\n            children: /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                setStatusDialog(true);\n                setAnchorEl(null);\n              },\n              children: \"Update Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Chip, {\n            label: ticket.status.replace('_', ' '),\n            color: getStatusColor(ticket.status),\n            sx: {\n              mt: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Priority\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Chip, {\n            label: ticket.priority,\n            color: getPriorityColor(ticket.priority),\n            sx: {\n              mt: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: ticket.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: ticket.product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), ticket.product.serialNumber && /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Serial Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: ticket.product.serialNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"textSecondary\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: ticket.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"Communication\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          height: '400px',\n          overflowY: 'auto',\n          mb: 2\n        },\n        children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: msg.sender._id === user._id ? 'flex-end' : 'flex-start',\n            mb: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            sx: {\n              maxWidth: '70%',\n              bgcolor: msg.sender._id === user._id ? 'primary.light' : 'grey.100'\n            },\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              sx: {\n                py: 1,\n                '&:last-child': {\n                  pb: 1\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  sx: {\n                    width: 24,\n                    height: 24,\n                    mr: 1\n                  },\n                  children: msg.sender.name[0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"textSecondary\",\n                  children: [msg.sender.name, \" - \", new Date(msg.timestamp).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          placeholder: \"Type your message...\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && handleSendMessage()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(AttachFileIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 22\n          }, this),\n          onClick: handleSendMessage,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: statusDialog,\n      onClose: () => setStatusDialog(false),\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Update Ticket Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          select: true,\n          fullWidth: true,\n          value: newStatus,\n          onChange: e => setNewStatus(e.target.value),\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"new\",\n            children: \"New\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"in_progress\",\n            children: \"In Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"on_hold\",\n            children: \"On Hold\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"resolved\",\n            children: \"Resolved\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setStatusDialog(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleStatusChange,\n          variant: \"contained\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n};\n_s(TicketDetails, \"bodrEHU6xlK8mjJ89PFOjYW12Ns=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = TicketDetails;\nexport default TicketDetails;\nvar _c;\n$RefreshReg$(_c, \"TicketDetails\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Container","Paper","Typography","Box","Grid","Chip","Divider","TextField","Button","CircularProgress","Card","CardContent","Avatar","IconButton","Menu","MenuItem","Dialog","DialogTitle","DialogContent","DialogActions","Alert","Send","SendIcon","MoreVert","MoreVertIcon","AttachFile","AttachFileIcon","axios","useAuth","getSocket","joinTicketRoom","onSocketEvent","offSocketEvent","sendTicketMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","getStatusColor","status","getPriorityColor","priority","TicketDetails","_s","id","user","ticket","setTicket","loading","setLoading","error","setError","message","setMessage","messages","setMessages","messagesEndRef","anchorEl","setAnchorEl","statusDialog","setStatusDialog","newStatus","setNewStatus","handleMessageReceived","data","prev","scrollToBottom","fetchTicketDetails","ticketRes","messagesRes","Promise","all","get","process","env","REACT_APP_API_URL","err","_err$response","_err$response$data","console","response","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","post","content","sender","_id","ticketId","_err$response2","_err$response2$data","handleStatusChange","patch","_err$response3","_err$response3$data","sx","display","justifyContent","alignItems","height","children","fileName","_jsxFileName","lineNumber","columnNumber","severity","maxWidth","p","mb","variant","ticketNumber","role","onClick","e","currentTarget","open","Boolean","onClose","container","spacing","item","xs","md","color","label","replace","mt","category","product","name","serialNumber","description","gutterBottom","overflowY","map","msg","index","bgcolor","py","pb","width","mr","Date","timestamp","toLocaleString","ref","gap","fullWidth","placeholder","value","onChange","target","onKeyPress","key","endIcon","select","_c","$RefreshReg$"],"sources":["C:/Users/sayda/CascadeProjects/beta-tech-support/frontend/src/pages/tickets/TicketDetails.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Grid,\n  Chip,\n  Divider,\n  TextField,\n  Button,\n  CircularProgress,\n  Card,\n  CardContent,\n  Avatar,\n  IconButton,\n  Menu,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Alert\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  MoreVert as MoreVertIcon,\n  AttachFile as AttachFileIcon\n} from '@mui/icons-material';\nimport axios from 'axios';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { getSocket, joinTicketRoom, onSocketEvent, offSocketEvent, sendTicketMessage } from '../../services/socketService';\n\nconst getStatusColor = (status) => {\n  switch (status) {\n    case 'new':\n      return 'info';\n    case 'in_progress':\n      return 'warning';\n    case 'on_hold':\n      return 'error';\n    case 'resolved':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\n\nconst getPriorityColor = (priority) => {\n  switch (priority) {\n    case 'urgent':\n      return 'error';\n    case 'high':\n      return 'warning';\n    case 'medium':\n      return 'info';\n    case 'low':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\n\nconst TicketDetails = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const [ticket, setTicket] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const messagesEndRef = useRef(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [statusDialog, setStatusDialog] = useState(false);\n  const [newStatus, setNewStatus] = useState('');\n\n  useEffect(() => {\n    joinTicketRoom(id);\n    \n    const handleMessageReceived = (data) => {\n      setMessages(prev => [...prev, data]);\n      scrollToBottom();\n    };\n    \n    onSocketEvent('message_received', handleMessageReceived);\n\n    fetchTicketDetails();\n\n    return () => {\n      offSocketEvent('message_received', handleMessageReceived);\n    };\n  }, [id, user]);\n\n  const fetchTicketDetails = async () => {\n    try {\n      const [ticketRes, messagesRes] = await Promise.all([\n        axios.get(`${process.env.REACT_APP_API_URL}/api/tickets/${id}`),\n        axios.get(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/messages`)\n      ]);\n      setTicket(ticketRes.data);\n      setMessages(messagesRes.data);\n      scrollToBottom();\n    } catch (err) {\n      console.error('Error fetching ticket details:', err);\n      setError(err.response?.data?.message || 'Failed to load ticket details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async () => {\n    if (!message.trim()) return;\n\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/messages`, {\n        content: message,\n        sender: user._id\n      });\n\n      sendTicketMessage({\n        ticketId: id,\n        message: response.data\n      });\n\n      setMessage('');\n    } catch (err) {\n      console.error('Error sending message:', err);\n      setError(err.response?.data?.message || 'Failed to send message');\n    }\n  };\n\n  const handleStatusChange = async () => {\n    try {\n      await axios.patch(`${process.env.REACT_APP_API_URL}/api/tickets/${id}/status`, {\n        status: newStatus\n      });\n      setTicket(prev => ({ ...prev, status: newStatus }));\n      setStatusDialog(false);\n      setAnchorEl(null);\n    } catch (err) {\n      console.error('Error updating ticket status:', err);\n      setError(err.response?.data?.message || 'Failed to update ticket status');\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (!ticket) {\n    return (\n      <Container>\n        <Alert severity=\"error\">Ticket not found</Alert>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Typography variant=\"h5\">\n            Ticket #{ticket.ticketNumber}\n          </Typography>\n          {(user.role === 'admin' || user.role === 'technical') && (\n            <>\n              <IconButton onClick={(e) => setAnchorEl(e.currentTarget)}>\n                <MoreVertIcon />\n              </IconButton>\n              <Menu\n                anchorEl={anchorEl}\n                open={Boolean(anchorEl)}\n                onClose={() => setAnchorEl(null)}\n              >\n                <MenuItem onClick={() => {\n                  setStatusDialog(true);\n                  setAnchorEl(null);\n                }}>\n                  Update Status\n                </MenuItem>\n              </Menu>\n            </>\n          )}\n        </Box>\n\n        <Grid container spacing={3}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Status</Typography>\n            <Chip\n              label={ticket.status.replace('_', ' ')}\n              color={getStatusColor(ticket.status)}\n              sx={{ mt: 1 }}\n            />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Priority</Typography>\n            <Chip\n              label={ticket.priority}\n              color={getPriorityColor(ticket.priority)}\n              sx={{ mt: 1 }}\n            />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Category</Typography>\n            <Typography variant=\"body1\">{ticket.category}</Typography>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Product</Typography>\n            <Typography variant=\"body1\">{ticket.product.name}</Typography>\n          </Grid>\n          {ticket.product.serialNumber && (\n            <Grid item xs={12} md={6}>\n              <Typography variant=\"subtitle2\" color=\"textSecondary\">Serial Number</Typography>\n              <Typography variant=\"body1\">{ticket.product.serialNumber}</Typography>\n            </Grid>\n          )}\n          <Grid item xs={12}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Description</Typography>\n            <Typography variant=\"body1\">{ticket.description}</Typography>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Chat Section */}\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Communication\n        </Typography>\n        <Box sx={{ height: '400px', overflowY: 'auto', mb: 2 }}>\n          {messages.map((msg, index) => (\n            <Box\n              key={index}\n              sx={{\n                display: 'flex',\n                justifyContent: msg.sender._id === user._id ? 'flex-end' : 'flex-start',\n                mb: 2\n              }}\n            >\n              <Card\n                sx={{\n                  maxWidth: '70%',\n                  bgcolor: msg.sender._id === user._id ? 'primary.light' : 'grey.100'\n                }}\n              >\n                <CardContent sx={{ py: 1, '&:last-child': { pb: 1 } }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                    <Avatar sx={{ width: 24, height: 24, mr: 1 }}>\n                      {msg.sender.name[0]}\n                    </Avatar>\n                    <Typography variant=\"caption\" color=\"textSecondary\">\n                      {msg.sender.name} - {new Date(msg.timestamp).toLocaleString()}\n                    </Typography>\n                  </Box>\n                  <Typography variant=\"body2\">{msg.content}</Typography>\n                </CardContent>\n              </Card>\n            </Box>\n          ))}\n          <div ref={messagesEndRef} />\n        </Box>\n\n        <Divider sx={{ mb: 2 }} />\n\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <TextField\n            fullWidth\n            placeholder=\"Type your message...\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n          />\n          <IconButton color=\"primary\">\n            <AttachFileIcon />\n          </IconButton>\n          <Button\n            variant=\"contained\"\n            endIcon={<SendIcon />}\n            onClick={handleSendMessage}\n          >\n            Send\n          </Button>\n        </Box>\n      </Paper>\n\n      {/* Status Update Dialog */}\n      <Dialog open={statusDialog} onClose={() => setStatusDialog(false)}>\n        <DialogTitle>Update Ticket Status</DialogTitle>\n        <DialogContent>\n          <TextField\n            select\n            fullWidth\n            value={newStatus}\n            onChange={(e) => setNewStatus(e.target.value)}\n            sx={{ mt: 2 }}\n          >\n            <MenuItem value=\"new\">New</MenuItem>\n            <MenuItem value=\"in_progress\">In Progress</MenuItem>\n            <MenuItem value=\"on_hold\">On Hold</MenuItem>\n            <MenuItem value=\"resolved\">Resolved</MenuItem>\n          </TextField>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setStatusDialog(false)}>Cancel</Button>\n          <Button onClick={handleStatusChange} variant=\"contained\">\n            Update\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default TicketDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}