{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sayda\\\\CascadeProjects\\\\beta-tech-support\\\\frontend\\\\src\\\\components\\\\tickets\\\\TicketList.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip, IconButton, Typography, Box, Avatar, Tooltip, CircularProgress, Dialog, DialogTitle, DialogContent } from '@mui/material';\nimport { Visibility as VisibilityIcon, Assignment as AssignmentIcon, Person as PersonIcon, Chat as ChatIcon } from '@mui/icons-material';\nimport { useAuth } from '../../contexts/AuthContext';\nimport AssignTicketDialog from './AssignTicketDialog';\nimport Chat from '../chat/Chat';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getStatusColor = status => {\n  switch (status) {\n    case 'new':\n      return 'info';\n    case 'in_progress':\n      return 'warning';\n    case 'on_hold':\n      return 'error';\n    case 'resolved':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\nconst getPriorityColor = priority => {\n  switch (priority) {\n    case 'urgent':\n      return 'error';\n    case 'high':\n      return 'warning';\n    case 'medium':\n      return 'info';\n    case 'low':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\nconst TicketList = ({\n  tickets,\n  onAssign,\n  showAssignButton = false,\n  onTicketUpdated,\n  loading: externalLoading\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    user\n  } = useAuth();\n  const [assignDialogOpen, setAssignDialogOpen] = useState(false);\n  const [selectedTicketId, setSelectedTicketId] = useState(null);\n  const [localLoading, setLocalLoading] = useState(false);\n  const [chatDialogOpen, setChatDialogOpen] = useState(false);\n  const [selectedTicketForChat, setSelectedTicketForChat] = useState(null);\n\n  // Use external loading state if provided\n  const loading = externalLoading || localLoading;\n\n  // Ensure we have a valid user role for navigation\n  const userRole = (user === null || user === void 0 ? void 0 : user.role) || 'client';\n  const handleViewTicket = ticketId => {\n    // Navigate to the correct role-specific ticket details page\n    navigate(`/${userRole}/tickets/${ticketId}`);\n  };\n\n  // Handle opening the assign dialog\n  const handleAssignClick = ticketId => {\n    console.log('Opening assign dialog for ticket:', ticketId);\n    setSelectedTicketId(ticketId);\n    setAssignDialogOpen(true);\n  };\n\n  // Handle successful ticket assignment\n  const handleAssignSuccess = updatedTicket => {\n    console.log('Ticket assigned successfully', updatedTicket);\n    setLocalLoading(true);\n    if (onTicketUpdated) {\n      console.log('Calling onTicketUpdated callback');\n      onTicketUpdated();\n    }\n    setTimeout(() => setLocalLoading(false), 1000); // Give time for the UI to update\n  };\n\n  // Handle opening the chat dialog\n  const handleChatClick = ticket => {\n    setSelectedTicketForChat(ticket);\n    setChatDialogOpen(true);\n  };\n\n  // Safely handle the case where tickets is undefined or empty\n  const validTickets = Array.isArray(tickets) ? tickets : [];\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n  if (!validTickets.length) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3,\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        color: \"textSecondary\",\n        children: \"No tickets found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Remove any duplicate tickets based on _id\n  const uniqueTickets = validTickets.filter((ticket, index, self) => index === self.findIndex(t => t._id === ticket._id));\n  console.log('Rendering tickets:', uniqueTickets.length);\n  console.log('Sample ticket (first in list):', uniqueTickets[0]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Ticket #\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Client\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Priority\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Created\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Assigned To\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: uniqueTickets.map(ticket => {\n            var _ticket$client, _ticket$clientDetails, _ticket$clientDetails2, _ticket$client2, _ticket$client3, _ticket$clientDetails3, _ticket$client4, _ticket$client5, _ticket$clientDetails4, _ticket$client6, _ticket$clientDetails5, _ticket$client7, _ticket$product, _ticket$product2, _ticket$product3, _ticket$category, _ticket$category2, _ticket$category3, _ticket$category4, _ticket$product4;\n            // Prepare client display info - use clientDetails if available, otherwise use client\n            // For username fallback, split the username at @ for email usernames\n            const username = ((_ticket$client = ticket.client) === null || _ticket$client === void 0 ? void 0 : _ticket$client.username) || '';\n            const usernameDisplay = username.includes('@') ? username.split('@')[0] : username;\n            const clientName = (_ticket$clientDetails = ticket.clientDetails) !== null && _ticket$clientDetails !== void 0 && _ticket$clientDetails.firstName && (_ticket$clientDetails2 = ticket.clientDetails) !== null && _ticket$clientDetails2 !== void 0 && _ticket$clientDetails2.lastName ? `${ticket.clientDetails.firstName} ${ticket.clientDetails.lastName}` : (_ticket$client2 = ticket.client) !== null && _ticket$client2 !== void 0 && _ticket$client2.firstName && (_ticket$client3 = ticket.client) !== null && _ticket$client3 !== void 0 && _ticket$client3.lastName ? `${ticket.client.firstName} ${ticket.client.lastName}` : usernameDisplay || 'Unknown Client';\n            const companyName = ((_ticket$clientDetails3 = ticket.clientDetails) === null || _ticket$clientDetails3 === void 0 ? void 0 : _ticket$clientDetails3.companyName) || ((_ticket$client4 = ticket.client) === null || _ticket$client4 === void 0 ? void 0 : _ticket$client4.companyName) || ((_ticket$client5 = ticket.client) === null || _ticket$client5 === void 0 ? void 0 : _ticket$client5.company) || 'Unknown Company';\n            const department = ((_ticket$clientDetails4 = ticket.clientDetails) === null || _ticket$clientDetails4 === void 0 ? void 0 : _ticket$clientDetails4.department) || ((_ticket$client6 = ticket.client) === null || _ticket$client6 === void 0 ? void 0 : _ticket$client6.department) || '';\n            const phoneNumber = ((_ticket$clientDetails5 = ticket.clientDetails) === null || _ticket$clientDetails5 === void 0 ? void 0 : _ticket$clientDetails5.phoneNumber) || ((_ticket$client7 = ticket.client) === null || _ticket$client7 === void 0 ? void 0 : _ticket$client7.phoneNumber) || '';\n\n            // Set product info - display complete product details properly\n            const productName = ((_ticket$product = ticket.product) === null || _ticket$product === void 0 ? void 0 : _ticket$product.name) || ticket.productName || 'Unknown Product';\n            const productType = ((_ticket$product2 = ticket.product) === null || _ticket$product2 === void 0 ? void 0 : _ticket$product2.type) || '';\n\n            // Format category and product information for better readability\n            const formattedCategory = ticket.category ? ticket.category.charAt(0).toUpperCase() + ticket.category.slice(1) : 'Other';\n\n            // Handle assignedTo display - check all possible formats\n            const assignedToUser = ticket.assignedTo || {};\n            console.log('Assigned to:', assignedToUser);\n\n            // Format for displaying technician name with username\n            let technicianName = '';\n            let technicianUsername = '';\n            if (assignedToUser) {\n              if (assignedToUser.firstName && assignedToUser.lastName) {\n                technicianName = `${assignedToUser.firstName} ${assignedToUser.lastName}`;\n                technicianUsername = assignedToUser.username || '';\n              } else if (assignedToUser.name) {\n                technicianName = assignedToUser.name;\n                technicianUsername = assignedToUser.username || '';\n              } else if (assignedToUser.username) {\n                technicianName = assignedToUser.username;\n                technicianUsername = assignedToUser.username;\n              }\n            }\n            return /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: ticket.ticketNumber || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  fontWeight: \"bold\",\n                  children: companyName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: [clientName, department && /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: '#666',\n                      fontSize: '0.85em'\n                    },\n                    children: [\"(\", department, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), phoneNumber && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"textSecondary\",\n                  children: phoneNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  fontWeight: \"bold\",\n                  children: productName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this), productType && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"textSecondary\",\n                  children: [\"Type: \", productType]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 21\n                }, this), ((_ticket$product3 = ticket.product) === null || _ticket$product3 === void 0 ? void 0 : _ticket$product3.serialNumber) && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  display: \"block\",\n                  color: \"textSecondary\",\n                  children: [\"S/N: \", ticket.product.serialNumber]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: [/*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  label: formattedCategory,\n                  color: ((_ticket$category = ticket.category) === null || _ticket$category === void 0 ? void 0 : _ticket$category.toLowerCase()) === 'hardware' ? 'primary' : ((_ticket$category2 = ticket.category) === null || _ticket$category2 === void 0 ? void 0 : _ticket$category2.toLowerCase()) === 'software' ? 'secondary' : ((_ticket$category3 = ticket.category) === null || _ticket$category3 === void 0 ? void 0 : _ticket$category3.toLowerCase()) === 'network' ? 'success' : ((_ticket$category4 = ticket.category) === null || _ticket$category4 === void 0 ? void 0 : _ticket$category4.toLowerCase()) === 'account' ? 'warning' : 'default'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 19\n                }, this), ((_ticket$product4 = ticket.product) === null || _ticket$product4 === void 0 ? void 0 : _ticket$product4.type) && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  display: \"block\",\n                  sx: {\n                    mt: 1\n                  },\n                  children: ticket.product.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  label: ticket.priority,\n                  color: getPriorityColor(ticket.priority)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  label: ticket.status.replace('_', ' '),\n                  color: getStatusColor(ticket.status)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: new Date(ticket.createdAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: technicianName ? /*#__PURE__*/_jsxDEV(Box, {\n                  children: technicianUsername ? /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    children: technicianUsername\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    children: technicianName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                  color: \"textSecondary\",\n                  children: \"Unassigned\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    gap: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"View Details\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"small\",\n                      onClick: () => handleViewTicket(ticket._id),\n                      children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 295,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 291,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 21\n                  }, this), showAssignButton && !ticket.assignedTo && /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"Assign Ticket\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"small\",\n                      onClick: () => handleAssignClick(ticket._id),\n                      children: /*#__PURE__*/_jsxDEV(AssignmentIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 304,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 300,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"Chat\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"small\",\n                      onClick: () => handleChatClick(ticket),\n                      children: /*#__PURE__*/_jsxDEV(ChatIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, ticket._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AssignTicketDialog, {\n      open: assignDialogOpen,\n      handleClose: () => setAssignDialogOpen(false),\n      ticketId: selectedTicketId,\n      onSuccess: handleAssignSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: chatDialogOpen,\n      onClose: () => setChatDialogOpen(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: [\"Chat - Ticket #\", selectedTicketForChat === null || selectedTicketForChat === void 0 ? void 0 : selectedTicketForChat.ticketNumber]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: selectedTicketForChat && /*#__PURE__*/_jsxDEV(Chat, {\n          ticketId: selectedTicketForChat._id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(TicketList, \"lWVdLkgQCVOkozGQcIoj90g74UU=\", false, function () {\n  return [useNavigate, useLocation, useAuth];\n});\n_c = TicketList;\nexport default TicketList;\nvar _c;\n$RefreshReg$(_c, \"TicketList\");","map":{"version":3,"names":["React","useState","useNavigate","useLocation","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Chip","IconButton","Typography","Box","Avatar","Tooltip","CircularProgress","Dialog","DialogTitle","DialogContent","Visibility","VisibilityIcon","Assignment","AssignmentIcon","Person","PersonIcon","Chat","ChatIcon","useAuth","AssignTicketDialog","jsxDEV","_jsxDEV","Fragment","_Fragment","getStatusColor","status","getPriorityColor","priority","TicketList","tickets","onAssign","showAssignButton","onTicketUpdated","loading","externalLoading","_s","navigate","location","user","assignDialogOpen","setAssignDialogOpen","selectedTicketId","setSelectedTicketId","localLoading","setLocalLoading","chatDialogOpen","setChatDialogOpen","selectedTicketForChat","setSelectedTicketForChat","userRole","role","handleViewTicket","ticketId","handleAssignClick","console","log","handleAssignSuccess","updatedTicket","setTimeout","handleChatClick","ticket","validTickets","Array","isArray","sx","display","justifyContent","p","children","fileName","_jsxFileName","lineNumber","columnNumber","length","textAlign","variant","color","uniqueTickets","filter","index","self","findIndex","t","_id","component","map","_ticket$client","_ticket$clientDetails","_ticket$clientDetails2","_ticket$client2","_ticket$client3","_ticket$clientDetails3","_ticket$client4","_ticket$client5","_ticket$clientDetails4","_ticket$client6","_ticket$clientDetails5","_ticket$client7","_ticket$product","_ticket$product2","_ticket$product3","_ticket$category","_ticket$category2","_ticket$category3","_ticket$category4","_ticket$product4","username","client","usernameDisplay","includes","split","clientName","clientDetails","firstName","lastName","companyName","company","department","phoneNumber","productName","product","name","productType","type","formattedCategory","category","charAt","toUpperCase","slice","assignedToUser","assignedTo","technicianName","technicianUsername","ticketNumber","fontWeight","style","fontSize","serialNumber","size","label","toLowerCase","mt","replace","Date","createdAt","toLocaleDateString","gap","title","onClick","open","handleClose","onSuccess","onClose","maxWidth","fullWidth","_c","$RefreshReg$"],"sources":["C:/Users/sayda/CascadeProjects/beta-tech-support/frontend/src/components/tickets/TicketList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Typography,\n  Box,\n  Avatar,\n  Tooltip,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent\n} from '@mui/material';\nimport {\n  Visibility as VisibilityIcon,\n  Assignment as AssignmentIcon,\n  Person as PersonIcon,\n  Chat as ChatIcon\n} from '@mui/icons-material';\nimport { useAuth } from '../../contexts/AuthContext';\nimport AssignTicketDialog from './AssignTicketDialog';\nimport Chat from '../chat/Chat';\n\nconst getStatusColor = (status) => {\n  switch (status) {\n    case 'new':\n      return 'info';\n    case 'in_progress':\n      return 'warning';\n    case 'on_hold':\n      return 'error';\n    case 'resolved':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\n\nconst getPriorityColor = (priority) => {\n  switch (priority) {\n    case 'urgent':\n      return 'error';\n    case 'high':\n      return 'warning';\n    case 'medium':\n      return 'info';\n    case 'low':\n      return 'success';\n    default:\n      return 'default';\n  }\n};\n\nconst TicketList = ({ tickets, onAssign, showAssignButton = false, onTicketUpdated, loading: externalLoading }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user } = useAuth();\n  const [assignDialogOpen, setAssignDialogOpen] = useState(false);\n  const [selectedTicketId, setSelectedTicketId] = useState(null);\n  const [localLoading, setLocalLoading] = useState(false);\n  const [chatDialogOpen, setChatDialogOpen] = useState(false);\n  const [selectedTicketForChat, setSelectedTicketForChat] = useState(null);\n  \n  // Use external loading state if provided\n  const loading = externalLoading || localLoading;\n\n  // Ensure we have a valid user role for navigation\n  const userRole = user?.role || 'client';\n\n  const handleViewTicket = (ticketId) => {\n    // Navigate to the correct role-specific ticket details page\n    navigate(`/${userRole}/tickets/${ticketId}`);\n  };\n\n  // Handle opening the assign dialog\n  const handleAssignClick = (ticketId) => {\n    console.log('Opening assign dialog for ticket:', ticketId);\n    setSelectedTicketId(ticketId);\n    setAssignDialogOpen(true);\n  };\n\n  // Handle successful ticket assignment\n  const handleAssignSuccess = (updatedTicket) => {\n    console.log('Ticket assigned successfully', updatedTicket);\n    setLocalLoading(true);\n    if (onTicketUpdated) {\n      console.log('Calling onTicketUpdated callback');\n      onTicketUpdated();\n    }\n    setTimeout(() => setLocalLoading(false), 1000); // Give time for the UI to update\n  };\n\n  // Handle opening the chat dialog\n  const handleChatClick = (ticket) => {\n    setSelectedTicketForChat(ticket);\n    setChatDialogOpen(true);\n  };\n\n  // Safely handle the case where tickets is undefined or empty\n  const validTickets = Array.isArray(tickets) ? tickets : [];\n  \n  if (loading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n  \n  if (!validTickets.length) {\n    return (\n      <Box sx={{ p: 3, textAlign: 'center' }}>\n        <Typography variant=\"h6\" color=\"textSecondary\">\n          No tickets found\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Remove any duplicate tickets based on _id\n  const uniqueTickets = validTickets.filter((ticket, index, self) => \n    index === self.findIndex(t => t._id === ticket._id)\n  );\n\n  console.log('Rendering tickets:', uniqueTickets.length);\n  console.log('Sample ticket (first in list):', uniqueTickets[0]);\n\n  return (\n    <>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Ticket #</TableCell>\n              <TableCell>Client</TableCell>\n              <TableCell>Product</TableCell>\n              <TableCell>Category</TableCell>\n              <TableCell>Priority</TableCell>\n              <TableCell>Status</TableCell>\n              <TableCell>Created</TableCell>\n              <TableCell>Assigned To</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {uniqueTickets.map((ticket) => {\n              // Prepare client display info - use clientDetails if available, otherwise use client\n              // For username fallback, split the username at @ for email usernames\n              const username = ticket.client?.username || '';\n              const usernameDisplay = username.includes('@') ? username.split('@')[0] : username;\n              \n              const clientName = \n                (ticket.clientDetails?.firstName && ticket.clientDetails?.lastName) ? \n                  `${ticket.clientDetails.firstName} ${ticket.clientDetails.lastName}` :\n                (ticket.client?.firstName && ticket.client?.lastName) ? \n                  `${ticket.client.firstName} ${ticket.client.lastName}` :\n                  usernameDisplay || 'Unknown Client';\n                  \n              const companyName = \n                ticket.clientDetails?.companyName || \n                ticket.client?.companyName || \n                ticket.client?.company || \n                'Unknown Company';\n                \n              const department = \n                ticket.clientDetails?.department || \n                ticket.client?.department || '';\n                \n              const phoneNumber = \n                ticket.clientDetails?.phoneNumber || \n                ticket.client?.phoneNumber || '';\n\n              // Set product info - display complete product details properly\n              const productName = ticket.product?.name || ticket.productName || 'Unknown Product';\n              const productType = ticket.product?.type || '';\n              \n              // Format category and product information for better readability\n              const formattedCategory = ticket.category ? ticket.category.charAt(0).toUpperCase() + ticket.category.slice(1) : 'Other';\n              \n              // Handle assignedTo display - check all possible formats\n              const assignedToUser = ticket.assignedTo || {};\n              console.log('Assigned to:', assignedToUser);\n              \n              // Format for displaying technician name with username\n              let technicianName = '';\n              let technicianUsername = '';\n              \n              if (assignedToUser) {\n                if (assignedToUser.firstName && assignedToUser.lastName) {\n                  technicianName = `${assignedToUser.firstName} ${assignedToUser.lastName}`;\n                  technicianUsername = assignedToUser.username || '';\n                } else if (assignedToUser.name) {\n                  technicianName = assignedToUser.name;\n                  technicianUsername = assignedToUser.username || '';\n                } else if (assignedToUser.username) {\n                  technicianName = assignedToUser.username;\n                  technicianUsername = assignedToUser.username;\n                }\n              }\n                \n              return (\n              <TableRow key={ticket._id}>\n                <TableCell>{ticket.ticketNumber || 'N/A'}</TableCell>\n                <TableCell>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {companyName}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    {clientName}\n                    {department && \n                      <span style={{ color: '#666', fontSize: '0.85em' }}>\n                        ({department})\n                      </span>\n                    }\n                  </Typography>\n                  {phoneNumber && (\n                    <Typography variant=\"caption\" color=\"textSecondary\">\n                      {phoneNumber}\n                    </Typography>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">{productName}</Typography>\n                  {productType && (\n                    <Typography variant=\"caption\" color=\"textSecondary\">\n                      Type: {productType}\n                    </Typography>\n                  )}\n                  {ticket.product?.serialNumber && (\n                    <Typography variant=\"caption\" display=\"block\" color=\"textSecondary\">\n                      S/N: {ticket.product.serialNumber}\n                    </Typography>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    size=\"small\"\n                    label={formattedCategory}\n                    color={ticket.category?.toLowerCase() === 'hardware' ? 'primary' : \n                           ticket.category?.toLowerCase() === 'software' ? 'secondary' : \n                           ticket.category?.toLowerCase() === 'network' ? 'success' : \n                           ticket.category?.toLowerCase() === 'account' ? 'warning' : 'default'}\n                  />\n                  {ticket.product?.type && (\n                    <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                      {ticket.product.type}\n                    </Typography>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    size=\"small\"\n                    label={ticket.priority}\n                    color={getPriorityColor(ticket.priority)}\n                  />\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    size=\"small\"\n                    label={ticket.status.replace('_', ' ')}\n                    color={getStatusColor(ticket.status)}\n                  />\n                </TableCell>\n                <TableCell>\n                  {new Date(ticket.createdAt).toLocaleDateString()}\n                </TableCell>\n                <TableCell>\n                  {technicianName ? (\n                    <Box>\n                      {technicianUsername ? (\n                        <Typography variant=\"body2\">{technicianUsername}</Typography>\n                      ) : (\n                        <Typography variant=\"body2\">{technicianName}</Typography>\n                      )}\n                    </Box>\n                  ) : (\n                    <Typography color=\"textSecondary\">Unassigned</Typography>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <Box sx={{ display: 'flex', gap: 1 }}>\n                    <Tooltip title=\"View Details\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleViewTicket(ticket._id)}\n                      >\n                        <VisibilityIcon />\n                      </IconButton>\n                    </Tooltip>\n                    {showAssignButton && !ticket.assignedTo && (\n                      <Tooltip title=\"Assign Ticket\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleAssignClick(ticket._id)}\n                        >\n                          <AssignmentIcon />\n                        </IconButton>\n                      </Tooltip>\n                    )}\n                    <Tooltip title=\"Chat\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleChatClick(ticket)}\n                      >\n                        <ChatIcon />\n                      </IconButton>\n                    </Tooltip>\n                  </Box>\n                </TableCell>\n              </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Ticket Assignment Dialog */}\n      <AssignTicketDialog \n        open={assignDialogOpen}\n        handleClose={() => setAssignDialogOpen(false)}\n        ticketId={selectedTicketId}\n        onSuccess={handleAssignSuccess}\n      />\n\n      {/* Chat Dialog */}\n      <Dialog\n        open={chatDialogOpen}\n        onClose={() => setChatDialogOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          Chat - Ticket #{selectedTicketForChat?.ticketNumber}\n        </DialogTitle>\n        <DialogContent>\n          {selectedTicketForChat && (\n            <Chat ticketId={selectedTicketForChat._id} />\n          )}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport default TicketList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}